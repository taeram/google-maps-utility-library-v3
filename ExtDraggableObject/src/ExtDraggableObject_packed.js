function ExtDraggableObject(c,d){var f=this;var g=(window["GEvent"]||google.maps.Event||google.maps.event);var h=d||{};var j=h.draggingCursor||"default";var k=h.draggableCursor||"default";var l=false,preventDefault_;var m,currentY_,formerY_,formerX_,formerMouseX_,formerMouseY_;var n,left_;var o,mouseUpEvent_,mouseMoveEvent_;var p,originalY_;var q=Math.round(h.intervalX/2);var r=Math.round(h.intervalY/2);var s=c.setCapture?c:document;if(typeof h.intervalX!=="number"){h.intervalX=1}if(typeof h.intervalY!=="number"){h.intervalY=1}if(typeof h.toleranceX!=="number"){h.toleranceX=Infinity}if(typeof h.toleranceY!=="number"){h.toleranceY=Infinity}o=g.addDomListener(c,"mousedown",mouseDown_);mouseUpEvent_=g.addDomListener(s,"mouseup",mouseUp_);setCursor_(false);if(h.container){}c.style.position="absolute";h.left=h.left||c.offsetLeft;h.top=h.top||c.offsetTop;h.interval=h.interval||1;moveTo_(h.left,h.top,false);function setCursor_(a){if(a){c.style.cursor=j}else{c.style.cursor=k}}function moveTo_(x,y,a){var b,roundedIntervalY_;left_=Math.round(x);n=Math.round(y);if(h.intervalX>1){b=Math.round(left_%h.intervalX);left_=(b<q)?(left_-b):(left_+(h.intervalX-b))}if(h.intervalY>1){roundedIntervalY_=Math.round(n%h.intervalY);n=(roundedIntervalY_<r)?(n-roundedIntervalY_):(n+(h.intervalY-roundedIntervalY_))}if(h.container&&h.container.offsetWidth){left_=Math.max(0,Math.min(left_,h.container.offsetWidth-c.offsetWidth));n=Math.max(0,Math.min(n,h.container.offsetHeight-c.offsetHeight))}if(typeof m==="number"){if(((left_-m)>h.toleranceX||(m-(left_+c.offsetWidth))>h.toleranceX)||((n-currentY_)>h.toleranceY||(currentY_-(n+c.offsetHeight))>h.toleranceY)){left_=p;n=originalY_}}if(!h.restrictX&&!a){c.style.left=left_+"px"}if(!h.restrictY&&!a){c.style.top=n+"px"}}function mouseMove_(a){var e=a||event;m=formerX_+((e.pageX||(e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft))-formerMouseX_);currentY_=formerY_+((e.pageY||(e.clientY+document.body.scrollTop+document.documentElement.scrollTop))-formerMouseY_);formerX_=m;formerY_=currentY_;formerMouseX_=e.pageX||(e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft);formerMouseY_=e.pageY||(e.clientY+document.body.scrollTop+document.documentElement.scrollTop);if(l){moveTo_(m,currentY_,preventDefault_);g.trigger(f,"drag",{mouseX:formerMouseX_,mouseY:formerMouseY_,startLeft:p,startTop:originalY_,event:e})}}function mouseDown_(a){var e=a||event;setCursor_(true);g.trigger(f,"mousedown",e);if(c.style.position!=="absolute"){c.style.position="absolute";return}formerMouseX_=e.pageX||(e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft);formerMouseY_=e.pageY||(e.clientY+document.body.scrollTop+document.documentElement.scrollTop);p=c.offsetLeft;originalY_=c.offsetTop;formerX_=p;formerY_=originalY_;mouseMoveEvent_=g.addDomListener(s,"mousemove",mouseMove_);if(c.setCapture){c.setCapture()}if(e.preventDefault){e.preventDefault();e.stopPropagation()}else{e.cancelBubble=true;e.returnValue=false}l=true;g.trigger(f,"dragstart",{mouseX:formerMouseX_,mouseY:formerMouseY_,startLeft:p,startTop:originalY_,event:e})}function mouseUp_(a){var e=a||event;if(l){setCursor_(false);g.removeListener(mouseMoveEvent_);if(c.releaseCapture){c.releaseCapture()}l=false;g.trigger(f,"dragend",{mouseX:formerMouseX_,mouseY:formerMouseY_,startLeft:p,startTop:originalY_,event:e})}m=currentY_=null;g.trigger(f,"mouseup",e)}f.moveTo=function(a){moveTo_(a.x,a.y,false)};f.moveBy=function(a){moveTo_(c.offsetLeft+a.width,c.offsetHeight+a.height,false)}f.setDraggingCursor=function(a){j=a;setCursor_(l)};f.setDraggableCursor=function(a){k=a;setCursor_(l)};f.left=function(){return left_};f.top=function(){return n};f.valueX=function(){var i=h.intervalX||1;return Math.round(left_/i)};f.valueY=function(){var i=h.intervalY||1;return Math.round(n/i)};f.setValueX=function(a){moveTo_(a*h.intervalX,n,false)};f.setValueY=function(a){moveTo_(left_,a*h.intervalY,false)};f.preventDefaultMovement=function(a){preventDefault_=a}}