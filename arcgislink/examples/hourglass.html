<html>
    <head>
        <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
        <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
        <title>Drawing Events</title>
        <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false">
        </script>
        <script type="text/javascript">
         document.write('<script type="text/javascript" src="../src/arcgislink'+(document.location.search.indexOf('compiled')>-1?'_compiled':'')+'.js"><'+'/script>');
        </script>
        <script type="text/javascript">
            function init() {
              var myOptions = {
                zoom: 4,
                center: new google.maps.LatLng(40, -100),//35.23, -80.84),
                mapTypeId: google.maps.MapTypeId.ROADMAP,
                streetViewControl: true //my favorite feature in V3!
              };
              var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
              var url = 'http://sampleserver1.arcgisonline.com/ArcGIS/rest/services/Demographics/ESRI_Census_USA/MapServer';
              var dynamap = new gmaps.ags.MapOverlay(url);//, { opacity: 0.5 });
              
              google.maps.event.addListener(dynamap, 'drawstart', function(){
                document.getElementById('drawing').style.visibility = 'visible';
               
              });
              google.maps.event.addListener(dynamap, 'drawend', function(){
                document.getElementById('drawing').style.visibility = 'hidden';
               });
              dynamap.setMap(map);
              // the following use cursor to indicate busy
              google.maps.event.addListener(gmaps.ags.Util, 'jsonpstart', function() {
                map.setOptions({
                  draggableCursor: 'wait'
                });
              });
              google.maps.event.addListener(gmaps.ags.Util, 'jsonpend', function() {
                map.setOptions({
                  draggableCursor: 'url(http://maps.gstatic.com/intl/en_us/mapfiles/openhand_8_8.cur),default'//inherit'
                });
              });
            }
        </script>
  </head>
 <body style="margin:0px; padding:0px;" onload="init()">
        <div id="map_canvas" style="width:100%; height:100%">
        </div>
        <div id="drawing" style="visibility:hidden;position:absolute;left:50%;top:50%;width:200px; height:200px; background-color:yellow; text-align:center; margin-left:-100px;margin-top:-100px">
        Drawing...
        </div>
    </body>
</html>
